<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RemoteApplications - Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style>
  body {
    background: white;
    color: black;
  }

  /* Generic Table Styles */
  table {
    background: white;
    border: 1px solid black;
    border-collapse: collapse;
    empty-cells: show;
    margin: 0.3em 0em;
  }
  th, td {
    border: 1px solid black;
    padding: 0.2em;
  }
  th {
    background: #C6C6C6;
  }
  td {
    vertical-align: top;
  }    

  /* Columns */
  td.kw {
    font-weight: bold;
  }
  td.arg {
    width: 300px;
    font-style: italic;
  }
  td.doc {
  }

  /* Tables in documentation */
  table.doc {
    border: 1px solid gray;
    background: transparent;
    border-collapse: collapse;
    empty-cells: show;
    font-size: 0.85em;
    font-family: arial,helvetica,sans-serif;
  }
  table.doc td {
    border: 1px solid gray;
    padding: 0.1em 0.3em;
    height: 1.2em;
  }

  /* Paragraphs */
  .libdoc, .links {
    width: 800px;
  }

  /* Misc */
  a.name, span.name {  
    font-style: italic;
    background: #f4f4f4;
    text-decoration: none;
  }
  a:link, a:visited {
    color: blue;
  }
  a:hover, a:active {
    text-decoration: underline;
    color: purple;
  }
  .footer {
    font-size: 0.9em;
  }
</style>
</head>
<body>
<h1>RemoteApplications - Documentation</h1>

<h2 id="introduction">Introduction</h2>
<p class='libdoc'>RemoteApplications library is used for launching Java applications in a separate process and taking Robot Framework (RF) libraries into use to operate on them. This is useful when application does something that cannot be tested with RF when running inside the same JVM. Such cases are when System.exit is called in the SUT, when multiple applications running in separate JVMs need to be tested in parallel or when application is started using Java Web Start.<br />
<br />
Using RemoteApplications requires that jvm_connector jar file is in <i>CLASSPATH</i> environment variable before starting RF test execution. RemoteApplications works with Java 1.5 and newer. Following paragraphs contain generic information about RemoteApplications library. See also keywords' documentation for more detailed information.<br />
<br />
Application can be started using RemoteApplications or any other way e.g. using SeleniumLibrary to start Java Web Start application. When the application is started using RemoteApplications, command used to start the application JVM is given to <a href="#Start Application" class="name">Start Application</a> keyword. In case application is started otherwise, RemoteApplications needs to be informed about started application so that it can establish connection to it. This is achieved using <a href="#Application Started" class="name">Application Started</a> keyword. <a href="#Application Started" class="name">Application Started</a> keyword can be also used to connect application started on remote machine.<br />
<br />
After the application is started, there is need to take the needed test libraries into use. That is done using <a href="#Take Library Into Use" class="name">Take Library Into Use</a> and <a href="#Take Libraries Into Use" class="name">Take Libraries Into Use</a> keywords. After that, keywords are ready to be used. Note that you need to take the libraries into use for every application.<br />
<br />
In case multiple applications are started with RemoteApplications library, <a href="#Switch To Application" class="name">Switch To Application</a> keyword can be used to define which application is currently active. Keywords handle always the currently active application.<br />
<br />
<a href="#Close Application" class="name">Close Application</a> is used to close the application. In case application is closed using some other keyword, RemoteApplications library needs to be informed by using <a href="#Close Application" class="name">Close Application</a> keyword. In case you want to close all applications, <a href="#Close All Applications" class="name">Close All Applications</a> keyword can be used.<br />
<br />
<b>NOTE:</b> RemoteApplications cannot be taken into use with <i>WITH NAME</i> functionality. However, there should not be need for that as the RemoteApplications library can handle multiple applications.<br />
<br />
<b>ROBOT AGENT</b><br />
<br />
Sometimes you cannot start the application locally from command line. In that case you need to use Robot Agent which will start testing capabilities to the started JVM. Robot Agent works both with java webstart applications and standalone java applications. It is taken into use by setting environment variable <i>JAVA_TOOL_OPTIONS</i> with value <i>-javaagent:${jvmconnector.jar}=${testing_dependencies_dir}[:PORT=${port}]</i> where <i>${jvmconnector.jar}</i> is the path to the jvmconnector package and <i>${testing_dependencies_dir}</i> is the path to the directory containing the test library jars. Optionally you can give the <i>:PORT=${port}</i> where the <i>:PORT=</i> is separator, and <i>${port}</i> defines the port number where the service providing the testing capabilities is started.<br />
<br />
When Robot Agent is used (RemoteApplications uses it internally) and the port parameter is not given, rmi_url from where the testing capabilities can be accessed is written to file <i>%HOME/.robotframework/jvmconnector/launched.txt</i> or to file <i>%APPDATA%\RobotFramework\jvmconnector\launched.txt</i> on Windows. In case application is started on remote machine, this rmi_url needs to be given to <a href="#Application Started" class="name">Application Started</a> keyword.<br />
<br />
<b>NOTE:</b> Under java 1.5 you have to package the jvmconnector.jar and all your testing dependencies into one big jar, you cannot provide the testing jars as arguments to the agent due to a limitation in Java 1.5's API.</p>

<h2 id="importing">Importing</h2>
<table class="keywords">
<tr>
  <th class="arg">Arguments</th>
  <th class="doc">Documentation</th>
</tr>
<tr>
  <td class="arg">connect_to_previously_launched_applications=</td>
  <td class="doc"><span class="name">connect_to_previously_launched_applications</span> defines whether to connect applications that were started in previous test execution. By default this feature is not in use. It can be taken into use by giving any value to library initialization like shown in below examples:<br />
<br />
<table border="1" class="doc">
<tr>
<td>Library</td>
<td>RemoteApplications</td>
<td># Does not connect to previously started applications</td>
<td></td>
</tr>
<tr>
<td>Library</td>
<td>RemoteApplications</td>
<td>Reconnect</td>
<td># Connects to previously started applications</td>
</tr>
</table>
<br />
Setting <span class="name">connect_to_previously_launched_applications</span> fastens the test case development as you can open the application once, and after that, re-execute the test against the opened application without restarting it. Obviously, you need to disable closing the application to achieve this. Reconnecting can also be achieved by using fixed <span class="name">rmi_url</span>, either by giving <span class="name">port</span> argument to <a href="#Start Application" class="name">Start Application</a> keyword or <span class="name">rmi_url</span> to <a href="#Application Started" class="name">Application Started</a> keyword.</td>
</tr>
</table>

<h2>Shortcuts</h2>
<div class='links'>
<a href="#Application Started" title="Connects to started application and switches to it.">Application&nbsp;Started</a>&nbsp;
<a href="#Close All Applications" title="Closes all the applications">Close&nbsp;All&nbsp;Applications</a>&nbsp;
<a href="#Close Application" title="Closes application.            url = self._apps.get_url(alias)">Close&nbsp;Application</a>&nbsp;
<a href="#Start Application" title="Starts the application, connects to it and makes it active application.">Start&nbsp;Application</a>&nbsp;
<a href="#Switch To Application" title="Changes the application where the keywords are executed.">Switch&nbsp;To&nbsp;Application</a>&nbsp;
<a href="#Take Libraries Into Use" title="Takes the libraries into use at the remote application.">Take&nbsp;Libraries&nbsp;Into&nbsp;Use</a>&nbsp;
<a href="#Take Library Into Use" title="Takes given library into use.">Take&nbsp;Library&nbsp;Into&nbsp;Use</a>&nbsp;
</div>

<h2>Keywords</h2>
<table class="keywords">
<tr>
  <th class="kw">Keyword</th>
  <th class="arg">Arguments</th>
  <th class="doc">Documentation</th>
</tr>
<tr>
  <td class="kw"><a name="Application Started"></a>Application Started</td>
  <td class="arg">alias, timeout=60 seconds, rmi_url=None</td>
  <td class="doc">Connects to started application and switches to it.<br />
<br />
<span class="name">alias</span> is the alias name for the application. When using multiple applications alias is used to switch between them with keyword <a href="#Switch To Application" class="name">Switch To Application</a>.<br />
<br />
<span class="name">timeout</span> is the time to wait the application to be started to the point where the testing capabilities are initialized and the connection to application can be established.<br />
<br />
<span class="name">rmi_url</span> is url that can be used to connect to the application. When used locally there is usually no need to give the <span class="name">rmi_url</span>. However, when the application is running on remote machine, the file based mechanism used to find the application is not enough and you need to provide the <span class="name">rmi_url</span>. Format of the <span class="name">rmi_url</span> is '<a href="rmi://host:port/robotrmiservice">rmi://host:port/robotrmiservice</a>'. See from <a href="#introduction" class="name">Introduction</a> info about Robot Agent.<br />
<br />
To access application started in previous test run, you can set <span class="name">connect_to_previously_launched_applications</span> when <a href="#importing" class="name">Importing</a> library. If the previously started application is available, this keyword connects to it in case the 'rmi_url' is not given.<br />
</td>
</tr>
<tr>
  <td class="kw"><a name="Close All Applications"></a>Close All Applications</td>
  <td class="arg"></td>
  <td class="doc">Closes all the applications</td>
</tr>
<tr>
  <td class="kw"><a name="Close Application"></a>Close Application</td>
  <td class="arg">alias=None</td>
  <td class="doc">Closes application. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;url = self._apps.get_url(alias)<br />
<br />
If <span class="name">alias</span> is given, closes application related to the alias. Otherwise closes the active application.</td>
</tr>
<tr>
  <td class="kw"><a name="Start Application"></a>Start Application</td>
  <td class="arg">alias, command, timeout=60 seconds, lib_dir=None, port=None</td>
  <td class="doc">Starts the application, connects to it and makes it active application.<br />
<br />
<span class="name">command</span> is the command used to start the application from the command line. It can be any command that finally starts JVM e.g. 'java -jar my_application.jar', javaws <a href="http://my.domain.fi/my_application.jnlp">http://my.domain.fi/my_application.jnlp</a> or 'start_my_app.bat'.<br />
<br />
<span class="name">lib_dir</span> is path to the directory containing all the test library jar files which are required for running the tests. <span class="name">lib_dir</span> is needed in case libraries are not in the CLASSPATH. When application is started using Java Web Start and Java version is 1.6 or higher, <span class="name">lib_dir</span> is mandatory. In case you are using 1.5 Java, you should package all these libraries to the <span class="name">jvm_connector_jar</span> which is set to CLASSPATH before starting the test execution.<br />
<br />
When Java Web Start is used to start the application, there is need to allow permissions for the testing capabilities. Easiest way to do that is to add file .java.policy with following content to $HOME directory or %USERPROFILE% directory on Windows:<br />
| <i>grant {</i><br />
| &nbsp; &nbsp; <i>permission java.security.AllPermission;</i><br />
| <i>};</i><br />
<br />
<span class="name">port</span> defines the port in which the testing capabilities are started on the application. By default port is selected randomly from available ports.<br />
<br />
<b>NOTE:</b> If the application is used to start other applications and those applications should be controlled with RemoteApplications, port should NOT be given.<br />
<br />
To access application started in previous test run, you can set <span class="name">connect_to_previously_launched_applications</span> when <a href="#importing" class="name">Importing</a> library. If the application is available, this keyword connects to it and does NOT run the command for starting it.<br />
</td>
</tr>
<tr>
  <td class="kw"><a name="Switch To Application"></a>Switch To Application</td>
  <td class="arg">alias</td>
  <td class="doc">Changes the application where the keywords are executed.<br />
<br />
<span class="name">alias</span> is the name of the application and it have been given with the <a href="#Application Started" class="name">Application Started</a> keyword.</td>
</tr>
<tr>
  <td class="kw"><a name="Take Libraries Into Use"></a>Take Libraries Into Use</td>
  <td class="arg">*library_names</td>
  <td class="doc">Takes the libraries into use at the remote application.<br />
<br />
<span class="name">library_names</span> contains all the libraries that you want to take into use on the remote side. <b>NOTE:</b> See 'Start Application' for information how to provide library jar files.</td>
</tr>
<tr>
  <td class="kw"><a name="Take Library Into Use"></a>Take Library Into Use</td>
  <td class="arg">library_name</td>
  <td class="doc">Takes given library into use.<br />
<br />
See <a href="#Take Libraries Into Use" class="name">Take Libraries Into Use</a> keyword for more details.<br />
</td>
</tr>
</table>
<p class="footer">
Altogether 7 keywords.<br />
Generated by <a href="http://code.google.com/p/robotframework/wiki/LibraryDocumentationTool">libdoc.py</a>
on 2009-12-21 16:34:06.
</p>
</body>
</html>
