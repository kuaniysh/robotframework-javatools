*** Setting ***
library	ApplicationLauncher	${testApp}	WITH NAME	myApp1Launcher
library	ApplicationLauncher	${testApp}	WITH NAME	myApp2Launcher
library	ApplicationLauncher	${testApp}	WITH NAME	myApp3Launcher
resource	applauncher_resource.tsv

*Variable*
${testApp}	org.robotframework.jvmconnector.mocks.MyApplication
${testKeywords}	org.robotframework.jvmconnector.keyword.JvmconnectorKeywords

*** TestCase ***	### NB! java is expected to be overriden by bin/java or bin_nt/java.exe
ExternalApplicationLauncher Acts As Java	
	startMyApplication	myApp1
	myApplicationShouldBeRunning	myApp1
	[teardown]	closeApplications	myApp1

Connects To Applications Started Elsewhere
	startMyApplication	myApp2
	myApplicationShouldBeRunning	myApp2
	startAnotherInstance	myApp3	-Dtag=myApp3
	selectApplicationAndImportLibraries	myApp3
	myApplicationShouldBeRunning	myApp3
	[teardown]	closeApplications	myApp2	myApp3

*** Keyword ****
startMyApplication	[arguments]	${tag}
	startProcess	java -Dtag=${tag} ${testApp} ${tag}
	selectApplicationAndImportLibraries	${tag}

selectApplicationAndImportLibraries	[arguments]	${tag}
	setLibrarySearchOrder	${tag}Launcher
	applicationStarted
	importRemoteLibraries	${tag}
	selectApplication	${tag}

myApplicationShouldBeRunning	[arguments]	${tag}
	@{arguments}=	getArguments
	${jvmTag}=	getSystemProperty	tag
	shouldBeEqual	${tag}	@{arguments}
	shouldBeEqual	${tag}	${jvmTag}
